---
title: "Aplikacja"
author: ""
format: html
editor: visual
number-sections: false
---

## Fragrance Recommender

<div>

```{=html}
<div class="form-wrapper">
  <form class="grid-form" id="myForm">

    <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz.jpg" alt="Opcja 1">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          name="wybor_1">
        <ul class="options">
        </ul>
      </div>
    </div>

    <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz_2.jpg" alt="Opcja 2">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          name="wybor_2">
        <ul class="options">
        </ul>
      </div>
    </div>

    <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz_3.jpg" alt="Opcja 3">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          name="wybor_3">
        <ul class="options"
        </ul>
      </div>
    </div>

    <div class="select-box">
      <div class="select-card">
        <img src="images//article//tlo.jpg" alt="Opcja 4">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          name="wybor_4">
        <ul class="options">
        </ul>
      </div>
    </div>

     <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz_5.jpg" alt="Opcja 5">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          name="wybor_5">
        <ul class="options">
        </ul>
      </div>
    </div>

     <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz_6.jpg" alt="Opcja 6">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          name="wybor_6">
        <ul class="options">
        </ul>
      </div>
    </div>
    <div class="submit-wrapper">
      <button type="button" id="sendBtn">Sprawdź</button>
    </div>
  </form>
  <div id="formMessage">Wynik modelu:</div>
</div>

<script>
  document.getElementById('sendBtn').addEventListener('click', function() {
  const randomPrediction = Math.random().toFixed(2);
  document.getElementById('formMessage').innerHTML =
    "Wynik modelu: " + (randomPrediction*100).toFixed(0) + "%";
});

/* ZAAWANOSOWANE AUTOUZUPELNIANIE Z DB */
document.querySelectorAll(".select-card").forEach(card => {
  const input = card.querySelector("input");
  const list = card.querySelector(".options");

  input.addEventListener("input", async () => {
    const query = input.value;
  
    if (query.length < 2) {
      list.innerHTML = "";
      list.classList.remove("active"); // ukryj listę jeśli za mało znaków
      return;
    }
  
    const res = await fetch(`http://localhost:3000/autocomplete?q=${query}`);
    const data = await res.json();
  
    list.innerHTML = "";
  
    if (data.length === 0) {
      list.classList.remove("active"); // brak wyników → ukryj
      return;
    }
  
    data.forEach(item => {
      const li = document.createElement("li");
      li.textContent = item;
  
      li.addEventListener("click", () => {
        input.value = item;
        list.innerHTML = "";
        list.classList.remove("active"); // kliknięcie → ukryj
      });
  
      list.appendChild(li);
    });

  list.classList.add("active"); // pokaż listę
  
  });
});

</script>
```

</div>
