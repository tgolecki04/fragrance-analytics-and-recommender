---
title: "Aplikacja"
author: ""
format: html
editor: visual
number-sections: false
---

## Fragrance Recommender

<div>

```{=html}
<div class="form-wrapper">
  <form class="grid-form" id="myForm">

    <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz.jpg" alt="Opcja 1">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          id="input_1">
        <ul class="options">
        </ul>
      </div>
    </div>

    <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz_2.jpg" alt="Opcja 2">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          id="input_2">
        <ul class="options">
        </ul>
      </div>
    </div>

    <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz_3.jpg" alt="Opcja 3">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          id="input_3">
        <ul class="options"
        </ul>
      </div>
    </div>

    <div class="select-box">
      <div class="select-card">
        <img src="images//article//tlo.jpg" alt="Opcja 4">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          id="input_4">
        <ul class="options">
        </ul>
      </div>
    </div>

     <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz_5.jpg" alt="Opcja 5">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          id="input_5">
        <ul class="options">
        </ul>
      </div>
    </div>

     <div class="select-box">
      <div class="select-card">
        <img src="images//article//aplikacja_formularz_6.jpg" alt="Opcja 6">
        <input
          class="autocomplete"
          type="text"
          placeholder="Wybierz perfumy"
          autocomplete="off"
          id="input_6">
        <ul class="options">
        </ul>
      </div>
    </div>
    <div class="submit-wrapper">
      <button type="button" id="sendBtn">Sprawd≈∫</button>
    </div>
  </form>
  <div id="formMessage">Wynik modelu:</div>
</div>

<script>

/* ZAAWANOSOWANE AUTOUZUPELNIANIE Z DB */
document.querySelectorAll(".select-card").forEach(card => {
  const input = card.querySelector("input");
  const list = card.querySelector(".options");

  input.addEventListener("input", async () => {
    const query = input.value;
  
    if (query.length < 2) {
      list.innerHTML = "";
      list.classList.remove("active"); // ukryj listƒô je≈õli za ma≈Ço znak√≥w
      return;
    }
  
    const res = await fetch(`http://localhost:3000/autocomplete?q=${query}`);
    const data = await res.json();
  
    list.innerHTML = "";
  
    if (data.length === 0) {
      list.classList.remove("active"); // brak wynik√≥w ‚Üí ukryj
      return;
    }
  
    data.forEach(item => {
      const li = document.createElement("li");
      li.textContent = item;
  
      li.addEventListener("click", () => {
        input.value = item;
        list.innerHTML = "";
        list.classList.remove("active"); // klikniƒôcie ‚Üí ukryj
      });
  
      list.appendChild(li);
    });

  list.classList.add("active"); // poka≈º listƒô
  
  });
});

// Uruchomienie przycisku & zapis do bazy danych wprowadoznych informajci
document.getElementById("sendBtn").addEventListener("click", async () => {

  const data = {
    input_1: document.getElementById("input_1").value,
    input_2: document.getElementById("input_2").value,
    input_3: document.getElementById("input_3").value,
    input_4: document.getElementById("input_4").value,
    input_5: document.getElementById("input_5").value,
    input_6: document.getElementById("input_6").value
  };

  console.log("Wysy≈Çam:", data); // üîç DEBUG

  const response = await fetch("http://localhost:3000/save", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  alert(await response.text());
  
  const response_python = await fetch("http://localhost:3000/random");
  const value = await response_python.text();
  document.getElementById("formMessage").textContent = "Najlepszy wyb√≥r: " + value;
});
</script>
```

</div>
